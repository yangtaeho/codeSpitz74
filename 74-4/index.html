<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>render</title>
    <script src="stage.js"></script>
    <script src="renderer.js"></script>
    <script src="table-renderer.js"></script>
    <script src="canvas-renderer.js"></script>
    <script src="console-renderer.js"></script>
    <!-- <script src="game.js"></script> -->
    <script src="game.taeho.js"></script>
</head>
<body>
    <div id="stageInfo">
        <div>Stage</div>
        <!--  -->
        <div class="stage"> 
        </div>
    </div>
</body>
<script>
    const demos = [
        [
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', '']
        ],
        [
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', '']
        ],
        [
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', '']
        ],
        [
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', '']
        ],
        [
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', '']
        ],
        [
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', '', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['red', '', '', '', '', 'green', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', ''],
            ['red', '', '', '', '', '', '', '', '', '', '', '']
        ]
    ];
</script>
<script>
const set = {row: 12, col: 12, back: 'gray', style: "width:400px;height:300px;"};
const main =_=>{
    const {col, row, back, style} = set;
    const renderer = new TableRenderer(col,row,back,style);
    const game = new Game(renderer,row,col);
    let isDone = false;
    const end =_=>isDone = true;
    game.start();

    const tick = 1000/60;
    let i = 0;
    const onGameAreaInterval = setInterval( _=> {
        if (isDone) {
            clearInterval(onGameAreaInterval);
            alert('종료되었습니다.');
        }


        // demo start
        // if(!demos[i]){ end(); return false; }
        // const data = new Data(row,col);
        // data.all(...demos[i++]);
        // demo end 

        if(!demos[i]){ end(); return false; }
        const data = new Data(row,col);
        data.all(...demos[i++]);
        // data.all(getPlayData());

        
        game.setData(data);
        game.run();
    }, tick);
};
main();
</script>
<script>
    //패널 초기화.. 인트로 띄우고 게임의 상태를 플레이로 바꿔줌... 
Panel.get(game,
    game => sel('#stageIntro'),
    (game, v)=>{
        sel('#stageIntro .stage').innerHTML = v;
        setTimeout(_=>game.setState(Game.play), 500);
    }
);

</script>
</html>